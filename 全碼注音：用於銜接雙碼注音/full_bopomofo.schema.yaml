# Rime schema
# encoding: utf-8

schema:
  schema_id: full_bopomofo
  name: "å…¨ç¢¼æ³¨éŸ³"
  version: '1.2.1'
  author:
    - imper0502 <yoj845@gmail.com>
  description: |
    æ³¨éŸ³è¼¸å…¥æ³•ï¼Œæ¡ç”¨ã€Œé›™ç¢¼æ³¨éŸ³ã€éµç›¤æ’åˆ—ï¼Œè¼¸å‡ºè‡ºç£æ­£é«”å­—å½¢ã€‚é›™ç¢¼æ³¨éŸ³çš„éŠœæ¥æ–¹æ¡ˆã€‚

  dependencies:
    - cangjie5
# å®šç¾©é–‹é—œ
switches:
  - name: ascii_mode
    reset: 0
    states: [ "ä¸­", "En" ]
  - name: full_shape
    states: [ åŠå½¢, å…¨å½¢ ]
  - name: ascii_punct
    states: [ "ã€‚ï¼Œ", "ï¼ï¼Œ" ]
  - name: s2tw
    reset: 1
    # å•“ç”¨ opencc å­—å½¢è½‰æ›ï¼Œä½†ä¸åœ¨é¸å–®ä¸­é¡¯ç¤ºã€‚
    # states: [ "ç®€åŒ–å­—", "æ•™æ¨™å­—" ]
  - name: t2tw
    reset: 1
    # å•“ç”¨ opencc å­—å½¢è½‰æ›ï¼Œä½†ä¸åœ¨é¸å–®ä¸­é¡¯ç¤ºã€‚æ­£ â†’ è‡º
    # states: [ "å‚³æ‰¿å­—", "æ•™æ¨™å­—" ]
  - name: tw2s
    reset: 0
    # å•“ç”¨ opencc å­—å½¢è½‰æ›ã€‚
    states: [ "æ•™æ¨™å­—", "ç®€åŒ–å­—" ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - echo_translator
    - punct_translator
    - table_translator@custom_phrase
    - reverse_lookup_translator
    - script_translator
  filters:
    - simplifier@s2tw  # ç°¡ç¹è½‰æ›
    - simplifier@t2tw  # æ­£ç¹è½‰æ›
    - simplifier@tw2s  # ç¹ç°¡è½‰æ›
    - uniquifier       # éæ¿¾é‡è¤‡çš„å€™é¸å­—ï¼Œæœ‰å¯èƒ½ä¾†è‡ªç°¡æ­£ç¹è½‰æ›

# ä¿®æ”¹å€™é¸å–®æ¨™ç±¤ã€ä¿®æ”¹å€™é¸å–®å¤§å°
menu:
  alternative_select_labels: [ ï¼–, ï¼—, ï¼˜, ï¼™, ï¼ ]
  alternative_select_keys: 67890
  page_size: 5


style: # ä¿®æ”¹å€™é¸å–®æ¨™ç±¤æ ¼å¼
  label_format: ' %s ' 

speller: # å®šç¾©é›™ç¢¼æ³¨éŸ³æ‹¼å¯«è¦å‰‡
  alphabet: "abcdefghijklmnopqrstuvwxyz12345"
  finals: "12345"
  delimiter: " '"
  algebra:
  # é è™•ç†
    - erase/^xx$/          # ç§»é™¤ã€xxã€‘ç·¨ç¢¼
    - xform/^m(\d)$/mu$1/  # ã„‡èª¿ â†’ ã„‡ã„¨èª¿
    - xform/^r5$/er5/      # ã€œå…’
    - xform/v/Ã¼/           # v â†’ Ã¼/
    - xform/iu/iou/        # è£œä¸Šæ¼éŸ³
    - xform/ui/uei/        # è£œä¸Šæ¼éŸ³
    - xform/iong/Ã¼ng/      # [jqx]iong â†’ [jqx]Ã¼ng
    - xform/ong/ung/       # yong, -ong â†’ yung, -ung
    - xform/^yu/Ã¼/         # yue, yuan, yun, yung  â†’ Ã¼e, Ã¼an, Ã¼n, Ã¼ng
    - xform/^yi?/i/        # yi, y- â†’ i, i-
    - xform/^wu?/u/        # wu, w- â†’ u, u-
    - xform/^([jqx])u/$1Ã¼/ # å–æ¶ˆã„ã„‘ã„’çš„çœç•¥è¡¨ç¤ºæ³•
    - xform/([iuÃ¼])n/$1en/ # in, ing, un, ung, Ã¼n, Ã¼ng â†’ ien, ieng, uen, ueng, Ã¼en, Ã¼eng
  # é–‹å§‹è½‰æ›è¼¸å…¥éµ
    # å…©å€‹ã€Œä¸‰åˆéŸ»æ¯ã€ã„¤ã„¥
    - xform/ang/J/
    - xform/eng/F/
    # å…­å€‹ã€ŒäºŒåˆéŸ»æ¯ã€ã„ã„Ÿã„ ã„¡ã„¢ã„£
    - xform/ai/H/
    - xform/ei/W/
    - xform/ao/S/
    - xform/ou/R/
    - xform/an/K/
    - xform/en/D/
    # ã„¦åŠã„
    - xform/er/L/
    - xform/eh/Q/
    - xform/(?<=[iÃ¼])e/Q/
    # ä¸‰å€‹å–®éŸ»æ¯ã„šã„›ã„œ
    - xlit/aoe/AOE/
    # ä¸‰å€‹ä»‹éŸ³ã„§ã„¨ã„©
    - xlit/iuy/IUY/
    # åˆ°æ­¤ï¼Œä»‹éŸ³ã€éŸ»æ¯å…¨éƒ¨å¤§å¯«ã€‚
    # ä¸‰å€‹ã€ŒäºŒåˆè²æ¯ã€ã„“ã„”ã„•
    - xform/^zh/a/
    - xform/^ch/v/
    - xform/^sh/o/
    # åˆ°æ­¤ï¼Œã€terra pinyinã€‘â†’ã€bopomofoã€‘
  # è¼¸å…¥éµè½‰æ›
    - xform/Ã¼/y/     # `Yéµ`è¼¸å…¥Ã¼
    - xlit/IUYAOEQHWSRKDJFL/iuyaoeqhwsrkdjfl/  # ä»‹éŸ³ã€éŸ»æ¯ä¸€å¾‹å°å¯«
  # ä½¿ç”¨é›¶è²æ¯è¡¨ç¤ºéŸ»æ¯ç¨ç«‹éŸ³ç¯€
    - xform/^([iuyaoeqhwsrkdjfl]\d)/e$1/
    # åˆ°æ­¤ï¼ŒåŸºæœ¬æ‹¼å¯«è¦å‰‡å®Œæˆ
  # é€²éšçš„æ‹¼å¯«è¦å‰‡ï¼Œä½¿ç”¨æ›´æ–¹ä¾¿
    - derive/^x([iy])/f$1/           # ã„ˆã„’å…±ç”¨`Féµ`
    - derive/^([avorzcs])i(\d)/$1$2/ # ã„“ã„”ã„•ã„–ã„—ã„˜ã„™çš„éŸ»æ¯å¯ä»¥çœç•¥
    - derive/^z([a-z]*[1-5])/w$1/    # `Wéµ`ä¹Ÿå¯ä»¥è¼¸å…¥ã„—
    - derive/^e([iuy])(\d)/$1$2/     # ä»‹éŸ³æœ‰è²èª¿æ™‚ï¼Œä¸éœ€å‰ç¶´é›¶è²æ¯
    - derive/([eiy])q(?=\d)/$1e/     # ã„ã„œå…±ç”¨`Eéµ`
  # è¼¸å…¥è²èª¿ï¼ˆä¸ç”¨æ•¸å­—éµï¼‰
    - derive/^(.+)1/$1m/
    - derive/^(.+)2/$1n/
    - derive/^(.+)3/$1c/
    - derive/^(.+)4/$1v/
    - derive/^(.+)5/$1b/
  # çœç•¥è²èª¿
    - derive/^(.+)\d/$1/

translator: # å®šç¾©ä¸»è¦ç¿»è­¯å™¨
  enable_completion: true
  initial_quality: 0.99
  dictionary: terra_pinyin
  prism: full_bopomofo
  preedit_format:
  # è²èª¿çš„é è¦½ï¼ˆä¸ç”¨æ•¸å­—éµè¼¸å…¥æ™‚ï¼‰
    - xform/(^| )([a-z]{1, 3})m(| |$)/$1$2Ë‰$3/
    - xform/(^| )([a-z]{1, 3})n(| |$)/$1$2ËŠ$3/
    - xform/(^| )([a-z]{1, 3})c(| |$)/$1$2Ë‡$3/
    - xform/(^| )([a-z]{1, 3})v(| |$)/$1$2Ë‹$3/
    - xform/(^| )([a-z]{1, 3})b(| |$)/$1$2Ë™$3/
  # ç‰¹æ®Šè²æ¯è™•ç†
    - xform/(^| )f(?=[iy])/$1x/
    - xform/(^| )w/$1z/
  # ç‰¹æ®ŠéŸ»æ¯è™•ç†
    - xform/([iy])e/$1q/
  # è²æ¯çš„é è¦½
    - xform/(^| )b/$1ã„…/
    - xform/(^| )p/$1ã„†/
    - xform/(^| )m/$1ã„‡/
    - xform/(^| )f/$1ã„ˆ/
    - xform/(^| )d/$1ã„‰/
    - xform/(^| )t/$1ã„Š/
    - xform/(^| )n/$1ã„‹/
    - xform/(^| )l/$1ã„Œ/
    - xform/(^| )g/$1ã„/
    - xform/(^| )k/$1ã„/
    - xform/(^| )h/$1ã„/
    - xform/(^| )j/$1ã„/
    - xform/(^| )q/$1ã„‘/
    - xform/(^| )x/$1ã„’/
    - xform/(^| )a/$1ã„“/
    - xform/(^| )v/$1ã„”/
    - xform/(^| )o/$1ã„•/
    - xform/(^| )r/$1ã„–/
    - xform/(^| )z/$1ã„—/
    - xform/(^| )c/$1ã„˜/
    - xform/(^| )s/$1ã„™/
    - xform/(^| )i/$1ã„§/
    - xform/(^| )u/$1ã„¨/
    - xform/(^| )y/$1ã„©/
    - xform/(^| )e/$1â—Œ/
  # çœç•¥çš„éŸ»æ¯åªæç¤ºä¸€æ¬¡
    - xform/(^| )(ã„“|ã„”|ã„•|ã„–|ã„—|ã„˜|ã„™)i$/$1$2ğŸ˜¬/
    - xform/(^| )(ã„“|ã„”|ã„•|ã„–|ã„—|ã„˜|ã„™)i/$1$2/
  # éŸ»æ¯çš„é è¦½ã€è²èª¿çš„é è¦½ï¼ˆä½¿ç”¨æ•¸å­—éµï¼‰
    - xlit/iuyaoeqhwsrkdjfl 12345/ã„§ã„¨ã„©ã„šã„›ã„œã„ã„ã„Ÿã„ ã„¡ã„¢ã„£ã„¤ã„¥ã„¦ã€€Ë‰ËŠË‡Ë‹Ë™/

custom_phrase: # å®šç¾©ä½¿ç”¨è€…è©åº«
  dictionary: ""
  user_dict: custom_phrase
  db_class: stabledb
  enable_completion: false
  enable_sentence: false
  initial_quality: 1

reverse_lookup: # å®šç¾©ç”¨å€‰é ¡æŸ¥è©¢æ³¨éŸ³
  dictionary: cangjie5
  enable_completion: true
  prefix: "`"
  suffix: "'"
  tips: ã€”å€‰é ¡ã€•
  preedit_format:
    - "xlit|abcdefghijklmnopqrstuvwxyz|æ—¥æœˆé‡‘æœ¨æ°´ç«åœŸç«¹æˆˆåå¤§ä¸­ä¸€å¼“äººå¿ƒæ‰‹å£å°¸å»¿å±±å¥³ç”°é›£åœç¬¦|"
  comment_format:
    - xform/e?r5$/er5/
    - xform/iu/iou/
    - xform/ui/uei/
    - xform/ong/ung/
    - xform/^yi?/i/
    - xform/^wu?/u/
    - xform/iu/v/
    - xform/^([jqx])u/$1v/
    - xform/([iuv])n/$1en/
    - xform/zh/Z/
    - xform/ch/C/
    - xform/sh/S/
    - xform/ai/A/
    - xform/ei/I/
    - xform/ao/O/
    - xform/ou/U/
    - xform/ang/K/
    - xform/eng/G/
    - xform/an/M/
    - xform/en/N/
    - xform/er/R/
    - xform/eh/E/
    - xform/([iv])e/$1E/
    - xform/1//
    - 'xlit|bpmfdtnlgkhjqxZCSrzcsiuvaoeEAIOUMNKGR2345|ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„ã„ã„‘ã„’ã„“ã„”ã„•ã„–ã„—ã„˜ã„™ã„§ã„¨ã„©ã„šã„›ã„œã„ã„ã„Ÿã„ ã„¡ã„¢ã„£ã„¤ã„¥ã„¦ËŠË‡Ë‹Ë™|'

# è¨­å®šOpenCCå­—é«”è½‰æ›
s2tw: # ç°¡ç¹è½‰æ›
  option_name: s2tw
  opencc_config: s2tw.json
  tips: none

t2tw: # æ­£ç¹è½‰æ›
  option_name: t2tw
  opencc_config: t2tw.json
  tips: char

tw2s: # ç¹ç°¡è½‰æ›
  option_name: tw2s
  opencc_config: tw2s.json
  tips: all

punctuator:
  import_preset: symbols
  full_shape:
    "<" : [ "<", "ã€Š", "ã€ˆ", "Â«", "â€¹" ]
    ">" : [ ">", "ã€‹", "ã€‰", "Â»", "â€º" ]
    "$" : [ "NT$", "$", "â‚¬", "Â£", "Â¥", "Â¢", "Â¤" ]
  half_shape:
    "<" : [ "<", "ã€Š", "ã€ˆ", "Â«", "â€¹" ]
    ">" : [ ">", "ã€‹", "ã€‰", "Â»", "â€º" ]
    "$" : [ "NT$", "$", "â‚¬", "Â£", "Â¥", "Â¢", "Â¤" ]

key_binder:
  import_preset: default

recognizer:
  import_preset: default
  patterns:
    email: "^[a-z][-_.0-9a-z]*@.*$"
    punct: "^/([0-9]0?|[A-Za-z]+)$"
    reverse_lookup: "`[a-z]*'?$"
    uppercase: "^[A-Z][-_+.'0-9A-Za-z]*$"
    url: "^(www[.]|https?:|ftp:|mailto:).*$"