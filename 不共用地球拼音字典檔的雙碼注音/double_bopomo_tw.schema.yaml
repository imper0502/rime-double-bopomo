# Rime schema
# encoding: utf-8

schema:
  schema_id: double_bopomo_tw
  name: "é›™ç¢¼æ³¨éŸ³ï¼è‡ºç£"
  version: "0.1"
  author:
    - imper0502 <yoj845@gmail.com>
  description: |  
    é›™ç¢¼æ³¨éŸ³ï¼è‡ºç£ï¼ˆæ³¨éŸ³è©åº«ï¼Œéæ¼¢èªæ‹¼éŸ³è©åº«ï¼‰

switches:
  - name: ascii_mode
    reset: 0
    states: [ "ä¸­", "En" ]
  - name: full_shape
    reset: 0
    states: [ "åŠå½¢", "å…¨å½¢" ]
  - name: ascii_punct
    reset: 0
    states: [ "ã€‚ï¼Œ", "ï¼ï¼Œ" ]
  - name: t2tw
    reset: 1
    states: [ "OpenCCæ¨™æº–", "å°ç£æ¨™æº–" ]  # æ­£ç¹è½‰æ›
  - name: s2tw
    reset: 1
    states: [ "ç®€åŒ–å­—é«”", "å°ç£æ¨™æº–" ]  # ç°¡ç¹è½‰æ›
  - name: tw2t
    reset: 0
    states: [ "å°ç£æ¨™æº–", "OpenCCæ¨™æº–" ]  # OpenCC æ¨™æº–

engine:
  processors:
    - key_binder
    - ascii_composer
    - recognizer
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - echo_translator
    - punct_translator
    - script_translator
  filters:
    - cjk_minifier     # éæ¿¾å°‘ç”¨å­—
    - simplifier@s2tw  # ç°¡ç¹è½‰æ›
    - simplifier@t2tw  # æ­£ç¹è½‰æ›
    - simplifier@tw2t  #
    - uniquifier       # éæ¿¾é‡è¤‡çš„å€™é¸å­—ï¼Œæœ‰å¯èƒ½ä¾†è‡ªç°¡æ­£ç¹è½‰æ›

t2tw: # æ­£ç¹è½‰æ›
  option_name: t2tw
  opencc_config: t2tw.json
  tips: none
s2tw: # ç°¡ç¹è½‰æ›
  option_name: s2tw
  opencc_config: s2tw.json
  tips: none
tw2t: # æ­£ç¹è½‰æ›
  option_name: tw2t
  opencc_config: tw2t.json
  tips: none

menu:
  alternative_select_keys: 67890
 
speller:
  alphabet: "bpmfdtnlgkhjqxvwarzcsiuyoeIUYAOEQHWSRKDJFL12345"
  finals: "12345"
  delimiter: " '"
  # ã„…ã„†ã„‡ã„ˆ  bpmf
  # ã„‰ã„Šã„‹ã„Œ  dtnl
  # ã„ã„ã„    gkh 
  # ã„ã„‘ã„’    jqx
  # ã„“ã„”ã„•ã„–  avor
  # ã„—ã„˜ã„™    zcs/wcs
  # ã„§ã„¨ã„©ï¼ˆè²ï¼‰ iuy ä¸¨ã„¨ã„©
  # ã„§ã„¨ã„©ï¼ˆéŸ»ï¼‰ IUY ä¸¨ã„¨ã„©
  # ã„šã„›ã„œã„ã€€   AOEQ
  # ã„ã„Ÿã„ ã„¡ã€€   HWSR
  # ã„¢ã„£ã„¤ã„¥ã€€   KDJF
  # ã„¦Ë‰ËŠË‡Ë‹Ë™      L12345
  algebra:
    - xlit/iğŸ˜¬Ë‰ËŠË‡Ë‹Ë™/II12345/
    - xlit/ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„ã„ã„‘ã„’ã„“ã„”ã„•ã„–ã„—ã„˜ã„™/bpmfdtnlgkhjqxavorzcs/
    - xlit/ã„§ã„¨ã„©ã„šã„›ã„œã„ã„ã„Ÿã„ ã„¡ã„¢ã„£ã„¤ã„¥ã„¦/IUYAOEQHWSRKDJFL/
    - xform/( |^)I(?=[AOEQHWSRKDJF])/$1i/
    - xform/( |^)U(?=[AOEQHWSRKDJF])/$1u/
    - xform/( |^)Y(?=[AOEQHWSRKDJF])/$1y/
    - xform/(^| )([IUYAOEQHWSRKDJFL]\d)/$1e$2/
    - derive/(^| )([eiy])Q(\d)/$1$2E$3/
    - derive/z/w/
    
    # åˆ°æ­¤ï¼Œæ³¨éŸ³è¢«è½‰æ›ç‚ºå°å¯«ï¼ˆè²æ¯ï¼‰ã€å¤§å¯«ï¼ˆéŸ»æ¯ï¼‰ã€æ•¸å­—ï¼ˆè²èª¿ï¼‰
    ## ã„šã„›ã„œã„ã€€   AOEQ
    - xform/[IU]A/x/
    - xform/UO/o/
    - xform/IQ/p/
    - xform/YQ/q/
    ## ã„ã„Ÿã„ ã„¡ã€€   HWSR
    - xform/(UH|IF)/g/
    - xform/(UW|ID)/v/
    - xform/IS/n/
    - xform/IR/b/
    ## ã„¢ã„£ã„¤ã„¥ã€€   KDJF
    - derive/Y([KDF])/$1/
    - xform/IK/m/
    - xform/[UY]K/t/
    - xform/[UY]D/z/
    - xform/[IU]J/c/
    - xform/[UY]F/l/
    ## Up Caps to Down Caps
    - xlit/IUYAOEQHWSRKDJFL/iuyaoeqhwsrkdjfl/
    # åˆ°æ­¤ï¼ŒåŸºæœ¬æŒ‡æ³•å®Œæˆï¼Œæ¥ä¸‹ä¾†åŠ å…¥é€²éšæŒ‡æ³•ã€‚
    ## [jqx] + [u] = [jqx] + [y]
    - derive/([jqx])y(\d)/$1u$2/
    ## [jqx] é‡éŸ»æ¯ï¼Œå…ˆè£œ [y]ï¼Œå†è£œ [i]ï¼Œè‡ªå‹•çµ„åˆçµåˆéŸ»ã€‚
    - derive/([jqx])x/$1a/  # ã„ã„‘ã„’ + ã„š = ã„ã„‘ã„’ + ã„§ã„š
    - derive/([jqx])n/$1s/  # ã„ã„‘ã„’ + ã„  = ã„ã„‘ã„’ + ã„§ã„ 
    - derive/([jqx])b/$1r/  # ã„ã„‘ã„’ + ã„¡ = ã„ã„‘ã„’ + ã„§ã„¡
    - derive/([jqx])c/$1j/  # ã„ã„‘ã„’ + ã„¤ = ã„ã„‘ã„’ + ã„§ã„¤
    ## [x] æœ‰äº›æ™‚å€™å¯ä»¥ç”¨ã€Fã€‘éµä»£æ›¿ã€‚
    - derive/x([ixpnbmvcgyqetzls])/f$1/  # ã„ˆå„ªå…ˆæ¬Šè¼ƒé«˜ï¼Œã„’è¼ƒä½ã€‚
    ### | æ³¨éŸ³ | åŸºæœ¬æŒ‡æ³• | é€²éšæŒ‡æ³• | æ¨è–¦æŒ‡æ³• |
    ### |------+---------------------+----------|
    ### |ã„’ã„§  |    xi    |    fi    |    fi    |
    ### |ã„’ã„§ã„š|  xx, xa  |    fx    |    fx    |
    ### |ã„’ã„§ã„|    xp    |    fp    |    fp    |
    ### |ã„’ã„§ã„ |  xn, xs  |  fn, fs  |    fs    |
    ### |ã„’ã„§ã„¡|  xb, xr  |    fb    |    xb    |
    ### |ã„’ã„§ã„¢|    xm    |    fm    |    fm    |
    ### |ã„’ã„§ã„£|    xv    |    fv    |    fv    |
    ### |ã„’ã„§ã„¤|  xc, xj  |    fc    |    xj    |
    ### |ã„’ã„§ã„¥|    xg    |    fg    |    fg    |
    ### |ã„’ã„©  |  xy, xu  |  fy, fu  |    fu    |
    ### |ã„’ã„©ã„|  xq, xe  |  fq, fe  |    fe    |
    ### |ã„’ã„©ã„¢|  xk, xt  |    ft    |    xk    |
    ### |ã„’ã„©ã„£|  xd, xz  |    fz    |    xz    |
    ### |ã„’ã„©ã„¥|  xf, xl  |    fl    |    fl    |
    ## å¤§å¯«å­—æ¯ = e + éŸ»æ¯
    - derive/ei(\d)/I$1/
    - derive/eu(\d)/U$1/
    - derive/ey(\d)/Y$1/
    - derive/ea(\d)/A$1/
    - derive/eo(\d)/O$1/
    - derive/ee(\d)/E$1/
    - derive/eq(\d)/Q$1/
    - derive/eh(\d)/H$1/
    - derive/ew(\d)/W$1/
    - derive/es(\d)/S$1/
    - derive/er(\d)/R$1/
    - derive/ek(\d)/K$1/
    - derive/ed(\d)/D$1/
    - derive/ej(\d)/J$1/
    - derive/ef(\d)/F$1/
    - derive/el(\d)/L$1/
    # åˆ°æ­¤ï¼Œé€²éšæŒ‡æ³•å®Œæˆã€‚
    ## å®šç¾©é›™æ‹¼
    - derive/([a-z][a-z])\d/$1/
    ## å®šç¾©ç°¡æ‹¼
    - abbrev/([a-z])[a-z]\d/$1/
    - abbrev/([a-z])[a-z](\d)/$1$2/
    - abbrev/([IUYAOEQHWSRKDJFL])\d/$1/

translator:
  enable_charset_filter: true
  strict_spelling: true
  dictionary: double_bopomo_tw
  prism: double_bopomo_tw
  preedit_format:
    - xform/ /$1Â¦/
    # - xlit/bpmfdtnlgkhjqxavorzwcseiuy/ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„ã„ã„‘ã„’ã„“ã„”ã„•ã„–ã„—ã„—ã„˜ã„™â—Œã„§ã„¨ã„©/
    # - xlit/IUYAOEQHWSRKDJFL12345/ã„§ã„¨ã„©ã„šã„›ã„œã„ã„ã„Ÿã„ ã„¡ã„¢ã„£ã„¤ã„¥ã„¦Ë‰ËŠË‡Ë‹Ë™/ 

punctuator:
  import_preset: symbols

key_binder:
  import_preset: default

recognizer:
  import_preset: default
  patterns:
    punct: "^/([0-9]0?|[A-Za-z]+)$"
    url: "^(www[.]|https?:|ftp:|mailto:).*$"
